"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Vote=function(){function e(){_classCallCheck(this,e),this.selector={voteTitle:".findco-voting-box-title",voteButton:".findco-vote-button",votePositive:".findco-vote-up",voteNegative:".findco-vote-down"}}return _createClass(e,[{key:"init",value:function(){this.initEventListeners()}},{key:"initEventListeners",value:function(){var e=this;document.querySelectorAll(this.selector.voteButton).forEach((function(t){t.addEventListener("click",e.handleVote)}))}},{key:"handleVote",value:function(e){e.preventDefault();var t=e.target.closest(window.Vote.selector.voteButton),o={voteType:t.dataset.type,postId:t.dataset.postId,apiKey:fcrPublicConfig.scripts.apiKey},n=fcrPublicConfig.scripts.apiUrl+"vote";fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){var t=e.text;console.log([document.querySelector(window.Vote.selector.voteTitle),t]),document.querySelector(window.Vote.selector.voteTitle).innerHTML=t.title,document.querySelector(window.Vote.selector.votePositive+" .text").innerHTML=t.voteUpText,document.querySelector(window.Vote.selector.voteNegative+" .text").innerHTML=t.voteDownText,document.querySelector(window.Vote.selector.voteButton+'[data-type="'.concat(e.voteType,'"]')).classList.add("findco-vote-selected")})).catch((function(e){console.error("There has been a problem with your fetch operation:",e)}))}}]),e}();window.Vote=new Vote;
//# sourceMappingURL=vote.js.map